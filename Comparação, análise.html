<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análise de Comparação - Agosto</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 p-4 sm:p-6 lg:p-8">

    <div class="max-w-6xl mx-auto">
        
        <!-- Cabeçalho -->
        <header class="mb-6 text-center">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 dark:text-white">Análise de Comparação</h1>
            <p class="text-lg text-gray-500 dark:text-gray-400 mt-2">1ª Semana vs 2ª Semana de Agosto</p>
        </header>

        <!-- Resumo dos Totais de Leads -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
            <div class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md text-center">
                <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Leads 1ª Semana</p>
                <p id="totalS1" class="text-4xl font-bold text-blue-500">24</p>
            </div>
            <div class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md text-center">
                <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Leads 2ª Semana</p>
                <p id="totalS2" class="text-4xl font-bold text-green-500">21</p>
            </div>
            <div class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md text-center">
                <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Diferença Total</p>
                <p id="totalDiff" class="text-4xl font-bold text-red-500">-3</p>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <!-- Coluna dos Cartões Comparativos -->
            <div id="status-cards" class="grid grid-cols-1 sm:grid-cols-2 gap-5">
                <!-- Os cartões de status serão inseridos aqui pelo JavaScript -->
            </div>

            <!-- Coluna do Gráfico Comparativo -->
            <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-md">
                <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100 text-center mb-4">Evolução Semanal por Categoria</h2>
                <canvas id="comparisonBarChart"></canvas>
            </div>

        </div>

    </div>

    <script>
        // --- Dados Comparativos (S1 vs S2 de Agosto) ---
        const comparisonData = [
            { category: 'Vácuo', s1: 9, s2: 9, color: 'bg-slate-500', hex: '#64748b' },
            { category: 'Estoque', s1: 4, s2: 5, color: 'bg-amber-500', hex: '#f59e0b' },
            { category: 'Experimental', s1: 4, s2: 1, color: 'bg-green-500', hex: '#22c55e' },
            { category: 'Matriculado / Negociando', s1: 3, s2: 2, color: 'bg-blue-500', hex: '#3b82f6' },
            { category: 'Visita', s1: 2, s2: 1, color: 'bg-purple-500', hex: '#a855f7' },
            { category: 'Impedimentos / Pagamento', s1: 2, s2: 3, color: 'bg-red-500', hex: '#ef4444' }
        ];

        const cardsContainer = document.getElementById('status-cards');
        
        // --- Cálculo e Exibição dos Totais ---
        const totalS1 = 24;
        const totalS2 = 21;
        const totalDiff = totalS2 - totalS1;

        document.getElementById('totalS1').textContent = totalS1;
        document.getElementById('totalS2').textContent = totalS2;
        const totalDiffEl = document.getElementById('totalDiff');
        totalDiffEl.textContent = totalDiff >= 0 ? `+${totalDiff}` : totalDiff;
        totalDiffEl.classList.add(totalDiff >= 0 ? 'text-green-500' : 'text-red-500');


        // --- Gerar os Cartões Comparativos ---
        comparisonData.forEach(item => {
            const diff = item.s2 - item.s1;
            let diffHtml;

            if (diff > 0) {
                diffHtml = `<span class="text-sm font-bold text-green-500 dark:text-green-400 flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" /></svg>
                                (+${diff})
                            </span>`;
            } else if (diff < 0) {
                 diffHtml = `<span class="text-sm font-bold text-red-500 dark:text-red-400 flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" /></svg>
                                (${diff})
                            </span>`;
            } else {
                 diffHtml = `<span class="text-sm font-bold text-gray-500 dark:text-gray-400 flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 10H6" /></svg>
                                (0)
                            </span>`;
            }

            const card = document.createElement('div');
            card.className = 'bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md flex flex-col justify-between';
            
            card.innerHTML = `
                <div>
                    <h2 class="text-lg font-bold text-gray-800 dark:text-gray-100">${item.category}</h2>
                    <div class="flex items-end space-x-3 my-2">
                        <p class="text-5xl font-extrabold text-gray-900 dark:text-white">${item.s2}</p>
                        <p class="text-2xl font-semibold text-gray-400 dark:text-gray-500 mb-1">vs ${item.s1}</p>
                    </div>
                </div>
                <div class="flex justify-between items-center mt-2">
                    ${diffHtml}
                    <div class="w-1/2 bg-gray-200 dark:bg-gray-700 rounded-full h-2.5">
                        <div class="${item.color} h-2.5 rounded-full" style="width: ${ (item.s2 / (item.s1 + item.s2) || 0) * 100}%"></div>
                    </div>
                </div>
            `;
            
            cardsContainer.appendChild(card);
        });

        // --- Renderização do Gráfico de Barras ---
        const ctx = document.getElementById('comparisonBarChart').getContext('2d');
        const comparisonBarChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: comparisonData.map(d => d.category),
                datasets: [
                    {
                        label: '1ª Semana',
                        data: comparisonData.map(d => d.s1),
                        backgroundColor: '#a1a1aa', // zinc-400
                        borderColor: '#71717a', // zinc-500
                        borderWidth: 1,
                        borderRadius: 4
                    },
                    {
                        label: '2ª Semana',
                        data: comparisonData.map(d => d.s2),
                        backgroundColor: comparisonData.map(d => d.hex),
                        borderColor: comparisonData.map(d => d.hex),
                        borderWidth: 1,
                        borderRadius: 4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                scales: {
                    y: { beginAtZero: true, ticks: { color: document.documentElement.classList.contains('dark') ? '#d1d5db' : '#374151' } },
                    x: { ticks: { color: document.documentElement.classList.contains('dark') ? '#d1d5db' : '#374151' } }
                },
                plugins: {
                    legend: { position: 'top', labels: { color: document.documentElement.classList.contains('dark') ? '#d1d5db' : '#374151' } }
                }
            }
        });
    </script>
</body>
</html>